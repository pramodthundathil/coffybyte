

<!doctype html>
{% load static %}

<html lang="en">
  <head>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>CoffyByte</title>
      
      <!-- Favicon -->
      <link rel="shortcut icon" href="{%static 'assets/images/logo.png' %}" />
      <link rel="stylesheet" href="{%static 'assets/css/backend-plugin.min.css' %}">
      <link rel="stylesheet" href="{%static 'assets/css/backend.css?v=1.0.0' %}">
      <link rel="stylesheet" href="{%static 'assets/vendor/@fortawesome/fontawesome-free/css/all.min.css' %}">
      <link rel="stylesheet" href="{%static 'assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css' %}">
      <link rel="stylesheet" href="{%static 'assets/vendor/remixicon/fonts/remixicon.css' %}">  
    </head>
  <body class="  ">
    <!-- loader Start -->
    <div id="loading">
          <div id="loading-center">
          </div>
    </div>
    <!-- loader END -->
    <!-- Wrapper Start -->
    <div class="wrapper">
      
      <div class="iq-sidebar  sidebar-default ">
          <div class="iq-sidebar-logo d-flex align-items-center justify-content-between">
              <a href="{%url 'dashboard' %}" class="header-logo">
                  <img src="{%static 'assets/images/logo.png' %}" class="img-fluid rounded-normal light-logo" alt="logo"><h5 class="logo-title light-logo ml-3">CoffyByte</h5>
              </a>
              <div class="iq-menu-bt-sidebar ml-0">
                  <i class="las la-bars wrapper-menu"></i>
              </div>
          </div>
          <div class="data-scrollbar" data-scroll="1">
              <nav class="iq-sidebar-menu">
                  <ul id="iq-sidebar-toggle" class="iq-menu">
        

                      <li class="active">
                          <a href="{%url 'dashboard' %}" class="svg-icon">                        
                              <svg  class="svg-icon" id="p-dash1" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>
                              </svg>
                              <span class="ml-4">Dashboards</span>
                          </a>
                      </li>
        
                      
          
                   

                      <li class=" ">
                          <a href="#product" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash2" width="20" height="20"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle>
                                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                              </svg>
                              <span class="ml-4">Food Menu</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="product" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                              <li class="">
                                  <a href="{%url 'List_Product' %}">
                                      <i class="las la-minus"></i><span>List Menu</span>
                                  </a>
                              </li>
                              <li class="">
                                  <a href="{%url 'Add_Product' %}">
                                      <i class="las la-minus"></i><span>Add Menu</span>
                                  </a>
                              </li>
                              <li class="">
                                <a href="">
                                    <i class="las la-minus"></i><span>List Add-Ons</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="">
                                    <i class="las la-minus"></i><span>Add Add-Ons</span>
                                </a>
                            </li>
                          </ul>
                      </li>
                      <li class=" ">
                          <a href="#category" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash3" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                              </svg>
                              <span class="ml-4">Food Categories</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="category" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                  <li class="">
                                          <a href="{% url 'List_Category' %}">
                                              <i class="las la-minus"></i><span>List Category</span>
                                          </a>
                                  </li>
                                  <li class="">
                                          <a href="">
                                              <i class="las la-minus"></i><span>Add Category</span>
                                          </a>
                                  </li>
                          </ul>
                      </li>
                      <li class=" ">
                        <a href="#return" class="collapsed" data-toggle="collapse" aria-expanded="false">
                            <svg class="svg-icon" id="p-dash6" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>
                            </svg>
                            <span class="ml-4">Dine-In-Tables</span>
                            <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                            </svg>
                        </a>
                        <ul id="return" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                <li class="">
                                        <a href="{%url 'List_Table' %}">
                                            <i class="las la-minus"></i><span>List Tables</span>
                                        </a>
                                </li>
                                <li class="">
                                        <a href="{%url 'Add_Table' %}">
                                            <i class="las la-minus"></i><span>Add Table</span>
                                        </a>
                                </li>
                        </ul>
                    </li>
                     
                      <li class=" ">
                          <a href="#purchase" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash5" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                  <line x1="1" y1="10" x2="23" y2="10"></line>
                              </svg>
                              <span class="ml-4">Sale</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="purchase" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                  <li class="">
                                          <a href="{%url 'list_sale' %}">
                                              <i class="las la-minus"></i><span>List Sales</span>
                                          </a>
                                  </li>
                                  <!-- <li class="">
                                          <a href="../backend/page-add-purchase.html">
                                              <i class="las la-minus"></i><span>Add purchase</span>
                                          </a>
                                  </li> -->
                          </ul>
                      </li>
                      <!-- <li class=" ">
                          <a href="#return" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash6" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>
                              </svg>
                              <span class="ml-4">Returns</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="return" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                  <li class="">
                                          <a href="../backend/page-list-returns.html">
                                              <i class="las la-minus"></i><span>List Returns</span>
                                          </a>
                                  </li>
                                  <li class="">
                                          <a href="../backend/page-add-return.html">
                                              <i class="las la-minus"></i><span>Add Return</span>
                                          </a>
                                  </li>
                          </ul>
                      </li> -->
                      <li class=" ">
                          <a href="#people" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash8" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                              </svg>
                              <span class="ml-4">People</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="people" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                  <!-- <li class="">
                                          <a href="../backend/page-list-customers.html">
                                              <i class="las la-minus"></i><span>Customers</span>
                                          </a>
                                  </li>
                                  <li class="">
                                          <a href="../backend/page-add-customers.html">
                                              <i class="las la-minus"></i><span>Add Customers</span>
                                          </a>
                                  </li> -->
                                  <li class="">
                                          <a href="{%url 'ListUser' %}">
                                              <i class="las la-minus"></i><span>Users</span>
                                          </a>
                                  </li>
                                  <li class="">
                                          <a href="{%url 'AddUser' %}">
                                              <i class="las la-minus"></i><span>Add Users</span>
                                          </a>
                                  </li>
                                  <!-- <li class="">
                                          <a href="../backend/page-list-suppliers.html">
                                              <i class="las la-minus"></i><span>Suppliers</span>
                                          </a>
                                  </li>
                                  <li class="">
                                          <a href="../backend/page-add-supplier.html">
                                              <i class="las la-minus"></i><span>Add Suppliers</span>
                                          </a>
                                  </li> -->
                          </ul>
                      </li>
                      <!-- <li class=" ">
                        <a href="#finance" class="collapsed" data-toggle="collapse" aria-expanded="false">
                            <svg class="svg-icon" id="p-dash3" width="20" height="20"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            <span class="ml-4">Finance</span>
                            <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="10 15 15 20 20 15"></polyline>
                                <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                            </svg>
                        </a>
                      <ul id="finance" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                        <li class="">
                            <a href="{%url 'income' %}">
                                <i class="las la-minus"></i><span>Income</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="{%url 'expence' %}">
                                <i class="las la-minus"></i><span>Expense</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="{%url 'balance_sheet' %}">
                                <i class="las la-minus"></i><span>Income and Expense Chart</span>
                            </a>
                        </li>
                    </ul> -->
                      <li class="">
                          <a href="{% url 'reports_dashboard'%}" class="">
                              <svg class="svg-icon" id="p-dash7" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>
                              </svg>
                              <span class="ml-4">Reports</span>
                          </a>
                          <ul id="reports" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                          </ul>
                      </li>
                 

                      <li class=" ">
                          <a href="#otherpage" class="collapsed" data-toggle="collapse" aria-expanded="false">
                              <svg class="svg-icon" id="p-dash9" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>
                              </svg>
                              <span class="ml-4">Settings</span>
                              <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                  <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                              </svg>
                          </a>
                          <ul id="otherpage" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                  <li class=" ">
                                      <a href="#user" class="collapsed" data-toggle="collapse" aria-expanded="false">
                                          <svg class="svg-icon" id="p-dash10" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>
                                          </svg>
                                          <span class="ml-4">User Details</span>
                                          <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                              <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                                          </svg>
                                      </a>
                                      <ul id="user" class="iq-submenu collapse" data-parent="#otherpage">
                                              <li class="">
                                                  <a href="">
                                                      <i class="las la-minus"></i><span>Profile</span>
                                                  </a>
                                              </li>
                                
                                      </ul>
                                  </li>
    

                                  <li class=" ">
                                    <a href="#tax" class="collapsed" data-toggle="collapse" aria-expanded="false">
                                        <svg class="svg-icon" id="p-dash10" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>
                                        </svg>
                                        <span class="ml-4">Tax Setting</span>
                                        <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                                        </svg>
                                    </a>
                                    <ul id="tax" class="iq-submenu collapse" data-parent="#otherpage">
                                            <li class="">
                                                <a href="">
                                                    <i class="las la-minus"></i><span>Add Tax Slab</span>
                                                </a>
                                            </li>
                                            <li class="">
                                                <a href="">
                                                    <i class="las la-minus"></i><span>View Tax Slab</span>
                                                </a>
                                            </li>
                              
                                    </ul>
                                </li> 
                             
                          </ul>
                      </li>
                  </ul>
              </nav>
              
              <div class="p-3"></div>
          </div>
          </div>      <div class="iq-top-navbar">
          <div class="iq-navbar-custom">
              <nav class="navbar navbar-expand-lg navbar-light p-0">
                  <div class="iq-navbar-logo d-flex align-items-center justify-content-between">
                      <i class="ri-menu-line wrapper-menu"></i>
                      <a href="{%url 'dashboard'%}" class="header-logo">
                          <img src="{%static 'assets/images/logo.png' %}" class="img-fluid rounded-normal" alt="logo">
                          <h5 class="logo-title ml-3">CoffyByte</h5>
      
                      </a>
                  </div>
                  <div class="iq-search-bar device-search">
                      <form action="#" class="searchbox">
                          <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                          <input type="text" class="text search-input" placeholder="Search here...">
                      </form>
                  </div>
                  <div class="d-flex align-items-center">
                      <button class="navbar-toggler" type="button" data-toggle="collapse"
                          data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                          aria-label="Toggle navigation">
                          <i class="ri-menu-3-line"></i>
                      </button>
                      <div class="collapse navbar-collapse" id="navbarSupportedContent">
                          <ul class="navbar-nav ml-auto navbar-list align-items-center">
                              <li>
                                  <a href="" class="btn border add-btn shadow-none mx-2 d-none d-md-block"
                                      ><i class="las la-plus mr-2"></i>POS</a>
                              </li>
                              <!-- <li class="nav-item nav-icon search-content">
                                  <a href="#" class="search-toggle rounded" id="dropdownSearch" data-toggle="dropdown"
                                      aria-haspopup="true" aria-expanded="false">
                                      <i class="ri-search-line"></i>
                                  </a>
                                  <div class="iq-search-bar iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownSearch">
                                      <form action="#" class="searchbox p-2">
                                          <div class="form-group mb-0 position-relative">
                                              <input type="text" class="text search-input font-size-12"
                                                  placeholder="type here to search...">
                                              <a href="#" class="search-link"><i class="las la-search"></i></a>
                                          </div>
                                      </form>
                                  </div>
                              </li> -->
                              <!-- <li class="nav-item nav-icon dropdown">
                                  <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton2"
                                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round" class="feather feather-mail">
                                          <path
                                              d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                          </path>
                                          <polyline points="22,6 12,13 2,6"></polyline>
                                      </svg>
                                      <span class="bg-primary"></span>
                                  </a>
                                  <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton2">
                                      <div class="card shadow-none m-0">
                                          <div class="card-body p-0 ">
                                              <div class="cust-title p-3">
                                                  <div class="d-flex align-items-center justify-content-between">
                                                      <h5 class="mb-0">All Messages</h5>
                                                      <a class="badge badge-primary badge-card" href="#">3</a>
                                                  </div>
                                              </div>
                                              <div class="px-3 pt-0 pb-0 sub-card">
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3 border-bottom">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="{%static 'assets/images/user/01.jpg' %}" alt="01">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Emma Watson</h6>
                                                                  <small class="text-dark"><b>12 : 47 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3 border-bottom">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="../assets/images/user/02.jpg" alt="02">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Ashlynn Franci</h6>
                                                                  <small class="text-dark"><b>11 : 30 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="../assets/images/user/03.jpg" alt="03">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Kianna Carder</h6>
                                                                  <small class="text-dark"><b>11 : 21 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                              </div>
                                              <a class="right-ic btn btn-primary btn-block position-relative p-2" href="#"
                                                  role="button">
                                                  View All
                                              </a>
                                          </div>
                                      </div>
                                  </div>
                              </li>
                              <li class="nav-item nav-icon dropdown">
                                  <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton"
                                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round" class="feather feather-bell">
                                          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                      </svg>
                                      <span class="bg-primary "></span>
                                  </a>
                                  <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                      <div class="card shadow-none m-0">
                                          <div class="card-body p-0 ">
                                              <div class="cust-title p-3">
                                                  <div class="d-flex align-items-center justify-content-between">
                                                      <h5 class="mb-0">Notifications</h5>
                                                      <a class="badge badge-primary badge-card" href="#">3</a>
                                                  </div>
                                              </div>
                                              <div class="px-3 pt-0 pb-0 sub-card">
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3 border-bottom">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="../assets/images/user/01.jpg" alt="01">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Emma Watson</h6>
                                                                  <small class="text-dark"><b>12 : 47 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3 border-bottom">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="../assets/images/user/02.jpg" alt="02">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Ashlynn Franci</h6>
                                                                  <small class="text-dark"><b>11 : 30 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                                  <a href="#" class="iq-sub-card">
                                                      <div class="media align-items-center cust-card py-3">
                                                          <div class="">
                                                              <img class="avatar-50 rounded-small"
                                                                  src="../assets/images/user/03.jpg" alt="03">
                                                          </div>
                                                          <div class="media-body ml-3">
                                                              <div class="d-flex align-items-center justify-content-between">
                                                                  <h6 class="mb-0">Kianna Carder</h6>
                                                                  <small class="text-dark"><b>11 : 21 pm</b></small>
                                                              </div>
                                                              <small class="mb-0">Lorem ipsum dolor sit amet</small>
                                                          </div>
                                                      </div>
                                                  </a>
                                              </div>
                                              <a class="right-ic btn btn-primary btn-block position-relative p-2" href="#"
                                                  role="button">
                                                  View All
                                              </a>
                                          </div>
                                      </div>
                                  </div>
                              </li> -->
                              <li class="nav-item nav-icon dropdown caption-content">
                                  <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton4"
                                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      <img src="{%static 'assets/images/user/1.png' %}" class="img-fluid rounded" alt="user">
                                  </a>
                                  <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                      <div class="card shadow-none m-0">
                                          <div class="card-body p-0 text-center">
                                              <div class="media-body profile-detail text-center">
                                                  <img src="{%static 'assets/images/page-img/profile-bg.jpg' %}" alt="profile-bg"
                                                      class="rounded-top img-fluid mb-4">
                                                  <img src="{%static 'assets/images/user/1.png' %}" alt="profile-img"
                                                      class="rounded profile-img img-fluid avatar-70">
                                              </div>
                                              <div class="p-3">
                                                  <h5 class="mb-1">{{request.user}}</h5>
                                                  <p class="mb-0">Since {{request.user.date_joined}}</p>
                                                  <div class="d-flex align-items-center justify-content-center mt-3">
                                                      <a href="" class="btn border mr-2">Profile</a>
                                                      <a href="{%url 'SignOut' %}" class="btn border">Sign Out</a>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </li>
                          </ul>
                      </div>
                  </div>
              </nav>
          </div>
      </div>
      
      {% block content %}
    <div class="content-page">
     <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4">
                <div class="card card-transparent card-block card-stretch card-height border-none">
                    <div class="card-body p-0 mt-lg-2 mt-0">
                        <h3 class="mb-3">Hi {{request.user}},</h3>
                        <p class="mb-0 mr-4">Your dashboard gives you views of key performance or business process.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-lg-4 col-md-4">
                        <div class="card card-block card-stretch card-height">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-4 card-total-sale">
                                    <div class="icon iq-icon-box-2 bg-info-light">
                                        <img src="{%static 'assets/images/product/1.png' %}" class="img-fluid" alt="image">
                                    </div>
                                    <div>
                                        <p class="mb-2">Total Income  {{month}}</p>
                                        <h4>AED {{total_income}}</h4>
                                    </div>
                                </div>                                
                                <div class="iq-progress-bar mt-2">
                                    <span class="bg-info iq-progress progress-1" data-percent="85">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                        <div class="card card-block card-stretch card-height">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-4 card-total-sale">
                                    <div class="icon iq-icon-box-2 bg-danger-light">
                                        <img src="{%static 'assets/images/product/2.png' %}" class="img-fluid" alt="image">
                                    </div>
                                    <div>
                                        <p class="mb-2">Total Cost {{month}}</p>
                                        <h4>AED {{total_expenses}}</h4>
                                    </div>
                                </div>
                                <div class="iq-progress-bar mt-2">
                                    <span class="bg-danger iq-progress progress-1" data-percent="70">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                        <div class="card card-block card-stretch card-height">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-4 card-total-sale">
                                    <div class="icon iq-icon-box-2 bg-success-light">
                                        <img src="{%static 'assets/images/product/3.png' %}" class="img-fluid" alt="image">
                                    </div>
                                    <div>
                                        <p class="mb-2">Total Invoices </p>
                                        <h4>{{total_invoices}}</h4>
                                    </div>
                                </div>
                                <div class="iq-progress-bar mt-2">
                                    <span class="bg-success iq-progress progress-1" data-percent="75">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Income and Expense Overview</h4>
                        </div>                        
                        <div class="card-header-toolbar d-flex align-items-center">
                            <div class="dropdown">
                                <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton001"
                                    data-toggle="dropdown">
                                    This Month<i class="ri-arrow-down-s-line ml-1"></i>
                                </span>
                                <div class="dropdown-menu dropdown-menu-right shadow-none"
                                    aria-labelledby="dropdownMenuButton001">
                                    <a class="dropdown-item" href="#" onclick="loadChartData('year'); return false;">Year</a>
                                    <a class="dropdown-item" href="#" onclick="loadChartData('month'); return false;">Month</a>
                                    <a class="dropdown-item" href="#" onclick="loadChartData('week'); return false;">Week</a>
                                </div>
                            </div>
                        </div>
                    </div>                    
                    <div class="card-body">
                        <div id="chart1" style="height: 350px;"></div>
                    </div>
                </div>
            </div>

            <!-- <div class="col-lg-6">
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Order On menu Items</h4>
                        </div>                        
                        <div class="card-header-toolbar d-flex align-items-center">
                            <div class="dropdown">
                                <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton001"
                                    data-toggle="dropdown">
                                    This Month<i class="ri-arrow-down-s-line ml-1"></i>
                                </span>
                                <div class="dropdown-menu dropdown-menu-right shadow-none"
                                    aria-labelledby="dropdownMenuButton001">
                                    <a class="dropdown-item" href="#" onclick="loadChartData('year'); return false;">Year</a>
                                    <a class="dropdown-item" href="#" onclick="loadChartData('month'); return false;">Month</a>
                                    <a class="dropdown-item" href="#" onclick="loadChartData('week'); return false;">Week</a>
                                </div>
                            </div>
                        </div>
                    </div>                    
                    <div class="card-body">
                        <div id="orderMenuChart" style="height: 350px;"></div>
                    </div>
                </div>
            </div> -->
            
            
            <div class="col-lg-8">
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex align-items-center justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Top Products</h4>
                        </div>
                        <div class="card-header-toolbar d-flex align-items-center">
                            <div class="dropdown">
                                <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton006"
                                    data-toggle="dropdown">
                                    This Month<i class="ri-arrow-down-s-line ml-1"></i>
                                </span>
                                <div class="dropdown-menu dropdown-menu-right shadow-none"
                                    aria-labelledby="dropdownMenuButton006">
                                    <a class="dropdown-item" href="#" data-filter="year">Year</a>
                                    <a class="dropdown-item" href="#" data-filter="month">Month</a>
                                    <a class="dropdown-item" href="#" data-filter="week">Week</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled row top-product mb-0" style="display: flex;flex-wrap: wrap;gap: 10px;" id="top-products-container">
                            <!-- Content will be loaded dynamically -->
                        </ul>
                    </div>
                </div>
            </div>
                      
            <div class="col-lg-4">
                <div class="card card-block card-stretch card-height-helf">
                    <div class="card-body">
                        <div class="d-flex align-items-top justify-content-between">
                            <div class="">
                                <p class="mb-0">Income</p>
                                <h5>AED {{total_income|floatformat:2}}</h5>
                            </div>
                            <div class="card-header-toolbar d-flex align-items-center">
                                <div class="dropdown">
                                    <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton003"
                                        data-toggle="dropdown">
                                        {{month}}<i class="ri-arrow-down-s-line ml-1"></i>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right shadow-none"
                                        aria-labelledby="dropdownMenuButton003">

                                        <a class="dropdown-item" href="#">{{month}}</a>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="layout1-chart-10" class="layout-chart-1">
                            <canvas id="incomeChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card card-block card-stretch card-height-helf">
                    <div class="card-body">
                        <div class="d-flex align-items-top justify-content-between">
                            <div class="">
                                <p class="mb-0">Expenses</p>
                                <h5>AED {{total_expenses|floatformat:2}}</h5>
                            </div>
                            <div class="card-header-toolbar d-flex align-items-center">
                                <div class="dropdown">
                                    <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton004"
                                        data-toggle="dropdown">
                                        {{month}}<i class="ri-arrow-down-s-line ml-1"></i>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right shadow-none"
                                        aria-labelledby="dropdownMenuButton004">

                                        <a class="dropdown-item" href="#">{{month}}</a>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="layout1-chart-40" class="layout-chart-2">
                            <canvas id="expenseChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">  
                <div class="card card-block card-stretch card-height">
                    <div class="card-header d-flex justify-content-between">
                        <div class="header-title">
                            <h4 class="card-title">Order Summary</h4>
                        </div>                        
                        <div class="card-header-toolbar d-flex align-items-center">
                            <div class="dropdown">
                                <span class="dropdown-toggle dropdown-bg btn" id="dropdownMenuButton005"
                                    data-toggle="dropdown">
                                    This Month<i class="ri-arrow-down-s-line ml-1"></i>
                                </span>
                                <div class="dropdown-menu dropdown-menu-right shadow-none"
                                    aria-labelledby="dropdownMenuButton005">
                                    <a class="dropdown-item" href="#" data-filter="year">Year</a>
                                    <a class="dropdown-item" href="#" data-filter="month">Month</a>
                                    <a class="dropdown-item" href="#" data-filter="week">Week</a>
                                </div>
                            </div>
                        </div>
                    </div> 
                    <div class="card-body">
                        <div class="d-flex flex-wrap align-items-center mt-2">
                            <div class="d-flex align-items-center progress-order-left">
                                <div class="progress progress-round m-0 orange conversation-bar" id="avg-order-progress" data-percent="0">
                                    <span class="progress-left">
                                        <span class="progress-bar"></span>
                                    </span>
                                    <span class="progress-right">
                                        <span class="progress-bar"></span>
                                    </span>
                                    <div class="progress-value text-secondary" id="avg-order-percent">0%</div>
                                </div>
                                <div class="progress-value ml-3 pr-5 border-right">
                                    <h5 id="avg-order-value">$0</h5>
                                    <p class="mb-0">Average Orders</p>
                                </div>
                            </div>
                            <div class="d-flex align-items-center ml-5 progress-order-right">
                                <div class="progress progress-round m-0 primary conversation-bar" id="top-order-progress" data-percent="0">
                                    <span class="progress-left">
                                        <span class="progress-bar"></span>
                                    </span>
                                    <span class="progress-right">
                                        <span class="progress-bar"></span>
                                    </span>
                                    <div class="progress-value text-primary" id="top-order-percent">0%</div>
                                </div>
                                <div class="progress-value ml-3">
                                    <h5 id="top-order-value">$0</h5>
                                    <p class="mb-0">Top Orders</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pt-0">
                        <div id="chart-order" style="height: 300px; width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Page end  -->
    </div>
      </div>
    </div>
    {% endblock %}
    <!-- Wrapper End-->
    <footer class="iq-footer">
            <div class="container-fluid">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-inline mb-0">
                                <li class="list-inline-item"><a href="#">Privacy Policy</a></li>
                                <li class="list-inline-item"><a href="#">Terms of Use</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-6 text-right">
                            <span class="mr-1"><script>document.write(new Date().getFullYear())</script></span> <a href="#" class="">CoffyByte</a>.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Backend Bundle JavaScript -->
    <script src="{%static 'assets/js/backend-bundle.min.js' %}"></script>
    
    <!-- Table Treeview JavaScript -->
    <script src="{%static 'assets/js/table-treeview.js' %}"></script>
    
    <!-- Chart Custom JavaScript -->
    <script src="{%static 'assets/js/customizer.js' %}"></script>
    
    <!-- Chart Custom JavaScript -->
    <script async src="{%static 'assets/js/chart-custom.js' %}"></script>
    
    <!-- app JavaScript -->
    <script src="{%static 'assets/js/app.js' %}"></script>

    {% block extra_scripts %}
            <!-- Load Chart.js instead of ApexCharts -->
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.42.0/apexcharts.min.js"></script>
            <script>
                // income line chart 

       
    var ctx = document.getElementById('incomeChart').getContext('2d');
    var incomeChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5'], // Adjust automatically based on the month
            datasets: [{
                label: 'Income',
                data: {{ weekly_income|safe }},  // Pass the weekly income data from the view
                borderColor: 'rgba(255, 99, 132, 1)',
                backgroundColor: 'rgba(255, 159, 64, 0.2)',
                borderWidth: 2,
                tension: 0.4,  // To get the smooth curve effect
                fill: true
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });


    // Expense Chart
    var ctx2 = document.getElementById('expenseChart').getContext('2d');
    var expenseChart = new Chart(ctx2, {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5'],  // Adjust automatically based on the month
            datasets: [{
                label: 'Expense',
                data: {{ weekly_expense|safe }},  // Pass the weekly expense data from the view
                borderColor: 'rgba(54, 162, 235, 1)',
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderWidth: 2,
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
            </script>
            <script>
                let chartInstance = null;
                
                document.addEventListener('DOMContentLoaded', function() {
                    console.log('DOM loaded');

                    
                    // Check if Chart.js is loaded
                    if (typeof Chart === 'undefined') {
                        console.error('Chart.js library not loaded!');
                        return;
                    }
                    
                    // Check if container exists
                    const chartContainer = document.getElementById('chart1');
                    if (!chartContainer) {
                        console.error('Chart container #chart1 not found!');
                        return;
                    }
                    
                    // Create canvas element for Chart.js
                    const canvas = document.createElement('canvas');
                    canvas.width = chartContainer.clientWidth;
                    canvas.height = chartContainer.clientHeight;
                    chartContainer.appendChild(canvas);
                    
                    // Create initial empty chart
                    const ctx = canvas.getContext('2d');
                    chartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: [],
                            datasets: [
                                {
                                    label: 'Income',
                                    data: [],
                                    borderColor: 'rgba(58, 122, 254, 1)',
                                    backgroundColor: 'rgba(58, 122, 254, 0.2)',
                                    fill: true,
                                    tension: 0.4
                                },
                                {
                                    label: 'Expenses',
                                    data: [],
                                    borderColor: 'rgba(255, 91, 92, 1)',
                                    backgroundColor: 'rgba(255, 91, 92, 0.2)',
                                    fill: true,
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.dataset.label + ': AED ' + context.parsed.y.toFixed(2);
                                        }
                                    }
                                },
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                y: {
                                    ticks: {
                                        callback: function(value) {
                                            return 'AED ' + value;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    // Load initial data
                    loadChartData('month');
                    

                });
                
                function loadChartData(period) {
                    console.log('Fetching data for period:', period);
                    
                    // Update dropdown text
                    const periodText = period.charAt(0).toUpperCase() + period.slice(1);
                    document.getElementById('dropdownMenuButton001').innerHTML = 
                        'This ' + periodText + '<i class="ri-arrow-down-s-line ml-1"></i>';
                    
                    // Fetch data from API
                    fetch('/get-overview-chart-data/?period=' + period)
                        .then(response => {
                            console.log('Response status:', response.status);
                            if (!response.ok) {
                                throw new Error('Network response was not ok: ' + response.statusText);
                            }
                            return response.json();
                        })
                        .then(data => {
                            console.log('Chart data received:', data);
                            
                            if (!chartInstance) {
                                console.error('Chart instance not initialized');
                                return;
                            }
                            
                            if (!data.labels || !data.datasets) {
                                console.error('Invalid data format:', data);
                                return;
                            }
                            
                            // Update chart data
                            chartInstance.data.labels = data.labels;
                            chartInstance.data.datasets[0].data = data.datasets[0].data;
                            chartInstance.data.datasets[1].data = data.datasets[1].data;
                            chartInstance.update();
                        })
                        .catch(error => {
                            console.error('Error loading chart data:', error);
                        });


                }
                

            </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load top products on page load (default: month)
        loadTopProducts('month');
        
        // Set up event listeners for filter dropdown
        const filterItems = document.querySelectorAll('[data-filter]');
        filterItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const filter = this.getAttribute('data-filter');
                document.querySelector('#dropdownMenuButton006').textContent = 
                    filter === 'year' ? 'This Year' : 
                    filter === 'week' ? 'This Week' : 'This Month';
                loadTopProducts(filter);
            });
        });
    });
    
    function loadTopProducts(filter) {
        fetch(`/get_top_products/?filter=${filter}`)
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('top-products-container');
                container.innerHTML = '';
                
                // Background colors for product cards
                const bgColors = ['bg-warning-light', 'bg-danger-light', 'bg-info-light', 'bg-success-light', 'bg-primary-light'];
                
                // Generate HTML for each product
                data.top_products.forEach((product, index) => {
                    const bgColor = bgColors[index % bgColors.length];
                    
                    const html = `
                    <li class="col-lg-3">
                        <div class="card card-block card-stretch card-height mb-0">
                            <div class="card-body">
                                <div class="${bgColor} rounded">
                                    <img src="${product.image || '/static/assets/images/product/default.png'}" class="style-img img-fluid m-auto p-3" alt="${product.name}" onerror="this.src='/static/assets/images/product/default.png'">
                                </div>
                                <div class="style-text text-left mt-3">
                                    <h5 class="mb-1">${product.name}</h5>
                                    <p class="mb-0">${product.count} Orders</p>
                                </div>
                            </div>
                        </div>
                    </li>`;
                    
                    container.innerHTML += html;
                });
            })
            .catch(error => {
                console.error('Error fetching top products:', error);
            });
    }
</script>




<!-- This script uses ApexCharts instead of Chart.js -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Make sure ApexCharts is available
        if (typeof ApexCharts === 'undefined') {
            console.error('ApexCharts is not loaded. Please include ApexCharts in your project.');
            // Add a fallback message to the chart container
            document.getElementById('chart-order').innerHTML = 
                '<div style="text-align:center;padding:50px;">ApexCharts library not found. Please include ApexCharts.</div>';
            return;
        }
        
        // ApexCharts instance
        let orderChart = null;
        
        // Load order summary on page load (default: month)
        loadOrderSummary('month');
        
        // Set up event listeners for filter dropdown
        const filterItems = document.querySelectorAll('[data-filter]');
        filterItems.forEach(item => {
            if (item.closest('[aria-labelledby="dropdownMenuButton005"]')) {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const filter = this.getAttribute('data-filter');
                    document.querySelector('#dropdownMenuButton005').textContent = 
                        filter === 'year' ? 'This Year' : 
                        filter === 'week' ? 'This Week' : 'This Month';
                    loadOrderSummary(filter);
                });
            }
        });
        
        function loadOrderSummary(filter) {
            fetch(`/get_order_summary/?filter=${filter}`)
                .then(response => response.json())
                .then(data => {
                    // Update the circular progress bars
                    updateProgressBar('avg-order-progress', data.avg_percentage);
                    updateProgressBar('top-order-progress', data.top_percentage);
                    
                    // Update values
                    document.getElementById('avg-order-value').textContent = `${data.avg_order_value}`;
                    document.getElementById('avg-order-percent').textContent = `${data.avg_percentage}%`;
                    document.getElementById('top-order-value').textContent = `AED ${data.top_order_value}`;
                    document.getElementById('top-order-percent').textContent = `AED {data.top_percentage}%`;
                    
                    // Update chart 
                    updateChart(data.chart_data);
                })
                .catch(error => {
                    console.error('Error fetching order summary:', error);
                });
        }
        
        function updateProgressBar(elementId, percent) {
            const progressElement = document.getElementById(elementId);
            progressElement.setAttribute('data-percent', percent);
            
            // Update the circular progress with jQuery plugin if available
            if (typeof jQuery !== 'undefined' && jQuery().circleProgress) {
                jQuery(`#${elementId}`).circleProgress({
                    value: percent / 100
                });
            } else {
                // Fallback if jQuery circle progress plugin is not available
                const leftSpan = progressElement.querySelector('.progress-left .progress-bar');
                const rightSpan = progressElement.querySelector('.progress-right .progress-bar');
                
                if (percent <= 50) {
                    leftSpan.style.transform = 'rotate(0deg)';
                    rightSpan.style.transform = `rotate(${percent * 3.6}deg)`;
                } else {
                    leftSpan.style.transform = `rotate(${(percent - 50) * 3.6}deg)`;
                    rightSpan.style.transform = 'rotate(180deg)';
                }
            }
        }
        
        function updateChart(chartData) {
            const chartContainer = document.getElementById('chart-order');
            
            // Check if chart container exists
            if (!chartContainer) {
                console.error('Chart container not found');
                return;
            }
            
            // Extract data for chart
            const categories = chartData.map(item => item.label);
            const revenueData = chartData.map(item => item.revenue);
            const countData = chartData.map(item => item.count);
            
            // Destroy previous chart instance if it exists
            if (orderChart) {
                orderChart.destroy();
            }
            
            // Create ApexCharts options
            const options = {
                chart: {
                    height: 300,
                    type: 'line',
                    toolbar: {
                        show: false
                    },
                    zoom: {
                        enabled: false
                    }
                },
                colors: ['#3a57e8', '#ff9900'],
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth',
                    width: 3
                },
                grid: {
                    borderColor: '#f1f1f1',
                    row: {
                        colors: ['#f3f3f3', 'transparent'],
                        opacity: 0.5
                    }
                },
                markers: {
                    size: 4,
                    colors: ['#3a57e8', '#ff9900'],
                    strokeColors: '#fff',
                    strokeWidth: 2,
                    hover: {
                        size: 7
                    }
                },
                xaxis: {
                    categories: categories,
                    labels: {
                        style: {
                            colors: '#8e8e8e',
                            fontSize: '12px',
                            fontFamily: 'Helvetica, Arial, sans-serif',
                            fontWeight: 400
                        }
                    },
                    axisBorder: {
                        show: false
                    }
                },
                yaxis: [
                    {
                        title: {
                            text: 'Revenue (AED)'
                        },
                        labels: {
                            formatter: function(val) {
                                return 'AED' + val.toFixed(0);
                            },
                            style: {
                                colors: '#8e8e8e',
                                fontSize: '12px',
                                fontFamily: 'Helvetica, Arial, sans-serif',
                                fontWeight: 400
                            }
                        }
                    },
                    {
                        opposite: true,
                        title: {
                            text: 'Order Count'
                        },
                        labels: {
                            formatter: function(val) {
                                return val.toFixed(0);
                            },
                            style: {
                                colors: '#8e8e8e',
                                fontSize: '12px',
                                fontFamily: 'Helvetica, Arial, sans-serif',
                                fontWeight: 400
                            }
                        }
                    }
                ],
                tooltip: {
                    y: [
                        {
                            formatter: function(val) {
                                return 'AED' + val.toFixed(2);
                            }
                        },
                        {
                            formatter: function(val) {
                                return val;
                            }
                        }
                    ]
                },
                legend: {
                    position: 'top',
                    horizontalAlign: 'right',
                    floating: true,
                    offsetY: -25,
                    offsetX: -5
                },
                series: [
                    {
                        name: 'Revenue',
                        type: 'line',
                        data: revenueData
                    },
                    {
                        name: 'Orders',
                        type: 'line',
                        data: countData
                    }
                ],
                fill: {
                    type: 'gradient',
                    gradient: {
                        shade: 'light',
                        type: "vertical",
                        shadeIntensity: 0.5,
                        gradientToColors: undefined,
                        inverseColors: true,
                        opacityFrom: 0.5,
                        opacityTo: 0.1,
                        stops: [0, 50, 100],
                        colorStops: []
                    }
                }
            };
            
            // Create new chart
            orderChart = new ApexCharts(chartContainer, options);
            orderChart.render();
        }
    });
</script>
<script>
    // Add this script to your Django template
document.addEventListener('DOMContentLoaded', function() {
    // Function to fetch financial data from Django backend
    async function fetchFinancialData(type, timeFrame) {
        try {
            // You'll need to create these API endpoints in your Django views
            const url = `/api/${type}/?timeframe=${timeFrame}`;
            const response = await fetch(url);
            const data = await response.json();
            return data;
        } catch (error) {
            console.error(`Error fetching ${type} data:`, error);
            return [];
        }
    }

    // Function to format data for ApexCharts
    function formatChartData(data) {
        // Group by date and calculate totals
        const groupedData = {};
        
        data.forEach(item => {
            const date = new Date(item.date);
            const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            
            if (!groupedData[dateStr]) {
                groupedData[dateStr] = 0;
            }
            groupedData[dateStr] += item.amount;
        });
        
        // Convert to array format for ApexCharts
        return Object.keys(groupedData).map(date => ({
            x: date,
            y: groupedData[date]
        }));
    }

    // Initialize income chart
    function initIncomeChart(data) {
        const formattedData = formatChartData(data);
        
        const options = {
            chart: {
                height: 100,
                type: 'area',
                sparkline: {
                    enabled: true
                },
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2,
                colors: ['#00ca00']
            },
            fill: {
                type: 'gradient',
                gradient: {
                    shade: 'dark',
                    type: 'vertical',
                    shadeIntensity: 0.2,
                    inverseColors: false,
                    opacityFrom: 0.5,
                    opacityTo: 0.1,
                    stops: [0, 100]
                }
            },
            colors: ['#00ca00'],
            series: [{
                name: 'Income',
                data: formattedData
            }],
            tooltip: {
                fixed: {
                    enabled: false
                },
                x: {
                    show: false
                },
                y: {
                    title: {
                        formatter: function(seriesName) {
                            return 'Income: $';
                        }
                    },
                    formatter: function(value) {
                        return value.toLocaleString();
                    }
                },
                marker: {
                    show: false
                }
            }
        };
        
        const incomeChart = new ApexCharts(document.querySelector("#incomeChart"), options);
        incomeChart.render();
        return incomeChart;
    }

    // Initialize expense chart
    function initExpenseChart(data) {
        const formattedData = formatChartData(data);
        
        const options = {
            chart: {
                height: 100,
                type: 'area',
                sparkline: {
                    enabled: true
                },
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2,
                colors: ['#ff4a4a']
            },
            fill: {
                type: 'gradient',
                gradient: {
                    shade: 'dark',
                    type: 'vertical',
                    shadeIntensity: 0.2,
                    inverseColors: false,
                    opacityFrom: 0.5,
                    opacityTo: 0.1,
                    stops: [0, 100]
                }
            },
            colors: ['#ff4a4a'],
            series: [{
                name: 'Expenses',
                data: formattedData
            }],
            tooltip: {
                fixed: {
                    enabled: false
                },
                x: {
                    show: false
                },
                y: {
                    title: {
                        formatter: function(seriesName) {
                            return 'Expense: $';
                        }
                    },
                    formatter: function(value) {
                        return value.toLocaleString();
                    }
                },
                marker: {
                    show: false
                }
            }
        };
        
        const expenseChart = new ApexCharts(document.querySelector("#expenseChart"), options);
        expenseChart.render();
        return expenseChart;
    }

    // Handle dropdown changes
    function setupDropdownListeners(incomeChart, expenseChart) {
        document.querySelector('#dropdownMenuButton003').addEventListener('click', function(e) {
            e.stopPropagation();
            document.querySelector('[aria-labelledby="dropdownMenuButton003"]').classList.toggle('show');
        });

        document.querySelector('#dropdownMenuButton004').addEventListener('click', function(e) {
            e.stopPropagation();
            document.querySelector('[aria-labelledby="dropdownMenuButton004"]').classList.toggle('show');
        });

        // Handle timeframe selection for income
        document.querySelectorAll('[aria-labelledby="dropdownMenuButton003"] .dropdown-item').forEach(item => {
            item.addEventListener('click', async function(e) {
                const timeFrame = e.target.textContent.toLowerCase();
                document.querySelector('#dropdownMenuButton003').textContent = e.target.textContent;
                document.querySelector('[aria-labelledby="dropdownMenuButton003"]').classList.remove('show');
                
                const data = await fetchFinancialData('income', timeFrame);
                incomeChart.updateSeries([{
                    name: 'Income',
                    data: formatChartData(data)
                }]);
            });
        });

        // Handle timeframe selection for expenses
        document.querySelectorAll('[aria-labelledby="dropdownMenuButton004"] .dropdown-item').forEach(item => {
            item.addEventListener('click', async function(e) {
                const timeFrame = e.target.textContent.toLowerCase();
                document.querySelector('#dropdownMenuButton004').textContent = e.target.textContent;
                document.querySelector('[aria-labelledby="dropdownMenuButton004"]').classList.remove('show');
                
                const data = await fetchFinancialData('expense', timeFrame);
                expenseChart.updateSeries([{
                    name: 'Expenses',
                    data: formatChartData(data)
                }]);
            });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function() {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.remove('show');
            });
        });
    }

    // Initial load
    async function initialize() {
        // Sample data (use this until your API endpoints are ready)
        const sampleIncomeData = [
            { date: '2025-04-01', amount: 8500 },
            { date: '2025-04-05', amount: 12000 },
            { date: '2025-04-10', amount: 9800 },
            { date: '2025-04-15', amount: 11500 },
            { date: '2025-04-20', amount: 15000 },
            { date: '2025-04-25', amount: 22000 },
            { date: '2025-05-01', amount: 19900 }
        ];
        
        const sampleExpenseData = [
            { date: '2025-04-01', amount: 3200 },
            { date: '2025-04-07', amount: 4500 },
            { date: '2025-04-12', amount: 8200 },
            { date: '2025-04-18', amount: 6800 },
            { date: '2025-04-23', amount: 9100 },
            { date: '2025-04-28', amount: 7800 },
            { date: '2025-05-02', amount: 6300 }
        ];

        // Uncomment these lines once your APIs are ready
        // const incomeData = await fetchFinancialData('income', 'month');
        // const expenseData = await fetchFinancialData('expense', 'month');
        
        // Use sample data for now
        const incomeData = sampleIncomeData;
        const expenseData = sampleExpenseData;

        const incomeChart = initIncomeChart(incomeData);
        const expenseChart = initExpenseChart(expenseData);

        setupDropdownListeners(incomeChart, expenseChart);
    }

    // Start initialization
    initialize();
});
</script>

<script>
    
// Initialize chart when document is ready
document.addEventListener('DOMContentLoaded', function() {
    // Load chart data with default period (month)
    loadChartData1('month');
});
    function loadChartData1(period) {
    // Update dropdown text
    let dropdownText = 'This Month';
    if (period === 'year') {
        dropdownText = 'This Year';
    } else if (period === 'week') {
        dropdownText = 'This Week';
    }
    document.getElementById('dropdownMenuButton001').innerHTML = dropdownText + '<i class="ri-arrow-down-s-line ml-1"></i>';
    
    // Fetch data from the backend
    fetch(`/api/popular-menu-items/?period=${period}`)
        .then(response => response.json())
        .then(data => {
            renderChart(data);
        })
        .catch(error => {
            console.error('Error fetching chart data:', error);
        });
}

function renderChart(data) {
    // Create a color array for different categories
    const colorMap = {};
    const colors = [
        '#4788ff', '#37c5ab', '#ff4b4b', '#ffbb33', '#a65eea', 
        '#1aa053', '#00b3ff', '#f58e5d', '#9267ff', '#2785fa'
    ];
    
    // Assign colors to categories
    let colorIndex = 0;
    data.categories.forEach(category => {
        if (!colorMap[category]) {
            colorMap[category] = colors[colorIndex % colors.length];
            colorIndex++;
        }
    });
    
    // Map colors based on categories
    const seriesColors = data.categories.map(category => colorMap[category]);
    
    // Format data for the chart
    const chartData = data.items.map((item, index) => {
        return {
            x: item,
            y: data.quantities[index],
            revenue: data.revenues[index],
            category: data.categories[index],
            fillColor: seriesColors[index]
        };
    });
    
    // Sort by quantity (descending)
    chartData.sort((a, b) => b.y - a.y);
    
    // Create chart options
    const options = {
        chart: {
            type: 'bar',
            height: 350,
            toolbar: {
                show: false
            }
        },
        plotOptions: {
            bar: {
                horizontal: false,
                columnWidth: '55%',
                endingShape: 'rounded',
                distributed: true
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            show: true,
            width: 2,
            colors: ['transparent']
        },
        colors: seriesColors,
        xaxis: {
            categories: chartData.map(item => item.x),
            labels: {
                style: {
                    fontSize: '12px',
                    fontFamily: 'Helvetica, Arial, sans-serif'
                },
                rotate: -45,
                rotateAlways: false,
                trim: true,
                maxHeight: 120
            }
        },
        yaxis: {
            title: {
                text: 'Quantity Ordered'
            }
        },
        fill: {
            opacity: 1
        },
        tooltip: {
            y: {
                formatter: function(val, { dataPointIndex, w }) {
                    const dataPoint = chartData[dataPointIndex];
                    return `<div>
                        <div>Item: ${dataPoint.x}</div>
                        <div>Category: ${dataPoint.category}</div>
                        <div>Quantity: ${val}</div>
                        <div>Revenue: $${dataPoint.revenue.toFixed(2)}</div>
                    </div>`;
                }
            }
        },
        title: {
            text: `Popular Menu Items (${getPeriodText(data.period)})`,
            align: 'center',
            style: {
                fontSize: '18px',
                fontWeight: 'bold'
            }
        }
    };
    
    // Create the chart
    const chart = new ApexCharts(document.getElementById('orderMenuChart'), options);
    chart.render();
}

function getPeriodText(period) {
    switch(period) {
        case 'week':
            return 'Last 7 Days';
        case 'month':
            return 'Last 30 Days';
        case 'year':
            return 'Last 365 Days';
        default:
            return 'Last 30 Days';
    }
}
</script>
            
            {% endblock %}
  </body>
</html>